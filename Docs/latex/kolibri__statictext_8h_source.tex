\doxysection{kolibri\+\_\+statictext.\+h}
\hypertarget{kolibri__statictext_8h_source}{}\label{kolibri__statictext_8h_source}\index{C:/Users/yyari/Documents/KolibriOS/KolibriOS-\/Cpp-\/Lib/include/C\_Layer/INCLUDE/kolibri\_statictext.h@{C:/Users/yyari/Documents/KolibriOS/KolibriOS-\/Cpp-\/Lib/include/C\_Layer/INCLUDE/kolibri\_statictext.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ KOLIBRI\_STATICTEXT\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ KOLIBRI\_STATICTEXT\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <kos32sys.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <kolibriLib/system/os.hpp>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00008\ \ \ \ \ cp866,\ \ \textcolor{comment}{//\ 6x9}}
\DoxyCodeLine{00009\ \ \ \ \ CP866,\ \ \textcolor{comment}{//\ 8x16}}
\DoxyCodeLine{00010\ \ \ \ \ UTF16,}
\DoxyCodeLine{00011\ \ \ \ \ UTF8}
\DoxyCodeLine{00012\ \}\ encoding\_t;}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00015\ \ \ \ \ uint32\_t\ start\_xy;}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordtype}{char}\ *text;}
\DoxyCodeLine{00017\ \ \ \ \ uint32\_t\ color\_flags;}
\DoxyCodeLine{00018\ \ \ \ \ uint32\_t\ bg\_color;}
\DoxyCodeLine{00019\ \}\mbox{\hyperlink{structstatictext}{statictext}};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00022\ \ \ \ \ uint32\_t\ start\_xy;}
\DoxyCodeLine{00023\ \ \ \ \ int32\_t\ number;}
\DoxyCodeLine{00024\ \ \ \ \ uint32\_t\ color\_flags;}
\DoxyCodeLine{00025\ \ \ \ \ uint32\_t\ bg\_color;}
\DoxyCodeLine{00026\ \ \ \ \ uint16\_t\ width;}
\DoxyCodeLine{00027\ \}\mbox{\hyperlink{structstaticnum}{staticnum}};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \mbox{\hyperlink{structstatictext}{statictext}}*\ kolibri\_statictext(\mbox{\hyperlink{structstatictext}{statictext}}*\ st,\ uint32\_t\ xy,\ \textcolor{keywordtype}{char}\ *text,\ encoding\_t\ enc,\ \textcolor{keywordtype}{int}\ size,\ color\_t\ font,\ color\_t\ bg)}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \ \ st-\/>start\_xy\ =\ xy;}
\DoxyCodeLine{00032\ \ \ \ \ st-\/>text\ =\ text;}
\DoxyCodeLine{00033\ \ \ \ \ st-\/>color\_flags\ =\ 0x80000000;\ \textcolor{comment}{//\ asciiz}}
\DoxyCodeLine{00034\ \ \ \ \ st-\/>bg\_color\ =\ bg;}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{if}(bg\ \&\ 0xFFFFFF)\ st-\/>color\_flags\ |=\ 0x40000000;\textcolor{comment}{//\ use\ background}}
\DoxyCodeLine{00036\ \ \ \ \ st-\/>color\_flags\ |=\ ((enc\ \&\ 1)\ <<\ 4)\ |\ (size\ \&\ 7)\ <<\ 24;}
\DoxyCodeLine{00037\ \ \ \ \ st-\/>color\_flags\ |=\ font\ \&\ 0xFFFFFF;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ st;}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \mbox{\hyperlink{structstatictext}{statictext}}*\ kolibri\_statictext\_def(\mbox{\hyperlink{structstatictext}{statictext}}*\ st,\ uint32\_t\ xy,\ \textcolor{keywordtype}{char}\ *text)}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{return}\ kolibri\_statictext(st,\ xy,\ text,\ encoding\_t::UTF8,\ 0,\ \mbox{\hyperlink{namespace_kolibri_lib_1_1_o_s_a3d1ea9fa87ea6d6c8e1a33c18dfb1ebf}{KolibriLib::OS::GetSystemColors}}().work\_text,\ 0);}
\DoxyCodeLine{00045\ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \mbox{\hyperlink{structstatictext}{statictext}}*\ kolibri\_new\_statictext(uint32\_t\ xy,\ \textcolor{keywordtype}{char}\ *text,\ encoding\_t\ enc,\ \textcolor{keywordtype}{int}\ size,\ color\_t\ font,\ color\_t\ bg)}
\DoxyCodeLine{00048\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{structstatictext}{statictext}}\ *st\ =\ (\mbox{\hyperlink{structstatictext}{statictext}}*)malloc(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structstatictext}{statictext}}));}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{return}\ kolibri\_statictext(st,\ xy,\ text,\ enc,\ size,\ font,\ bg);}
\DoxyCodeLine{00052\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \mbox{\hyperlink{structstatictext}{statictext}}*\ kolibri\_new\_statictext\_def(uint32\_t\ xy,\ \textcolor{keywordtype}{char}\ *text)}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ kolibri\_new\_statictext(xy,\ text,\ encoding\_t::UTF8,\ 0,\ \mbox{\hyperlink{namespace_kolibri_lib_1_1_o_s_a3d1ea9fa87ea6d6c8e1a33c18dfb1ebf}{KolibriLib::OS::GetSystemColors}}().work\_text,\ 0);}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \_\_attribute\_\_((\_\_stdcall\_\_))}
\DoxyCodeLine{00060\ \textcolor{keywordtype}{void}\ statictext\_draw(\mbox{\hyperlink{structstatictext}{statictext}}\ *st)}
\DoxyCodeLine{00061\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_(}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{stringliteral}{"{}int\ \$0x40"{}}}
\DoxyCodeLine{00064\ \ \ \ \ ::\textcolor{stringliteral}{"{}a"{}}(4),}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}b"{}}(st-\/>start\_xy),}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}c"{}}(st-\/>color\_flags),}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}d"{}}(st-\/>text),}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}D"{}}(st-\/>bg\_color)}
\DoxyCodeLine{00069\ \ \ \ \ :);}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ gui\_add\_statictext(\mbox{\hyperlink{structkolibri__window}{kolibri\_window}}\ *wnd,\ \mbox{\hyperlink{structstatictext}{statictext}}*\ st)}
\DoxyCodeLine{00073\ \{}
\DoxyCodeLine{00074\ \ \ \ \ kolibri\_window\_add\_element(wnd,\ KOLIBRI\_STATICTEXT,\ st);}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \mbox{\hyperlink{structstaticnum}{staticnum}}*\ kolibri\_staticnum(\mbox{\hyperlink{structstaticnum}{staticnum}}*\ st,\ uint32\_t\ xy,\ int32\_t\ width,\ int16\_t\ number,\ encoding\_t\ enc,\ \textcolor{keywordtype}{int}\ size,\ color\_t\ font,\ color\_t\ bg)}
\DoxyCodeLine{00080\ \{}
\DoxyCodeLine{00081\ \ \ \ \ st-\/>start\_xy\ =\ xy;}
\DoxyCodeLine{00082\ \ \ \ \ st-\/>number\ =\ number;}
\DoxyCodeLine{00083\ \ \ \ \ st-\/>color\_flags\ =\ 0;}
\DoxyCodeLine{00084\ \ \ \ \ st-\/>bg\_color\ =\ bg;}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{if}(bg\ \&\ 0xFFFFFF)\ st-\/>color\_flags\ |=\ 0x40000000;\textcolor{comment}{//\ use\ background}}
\DoxyCodeLine{00086\ \ \ \ \ st-\/>color\_flags\ |=\ ((enc\ \&\ 1)\ <<\ 4)\ |\ (size\ \&\ 7)\ <<\ 24;}
\DoxyCodeLine{00087\ \ \ \ \ st-\/>color\_flags\ |=\ font\ \&\ 0xFFFFFF;}
\DoxyCodeLine{00088\ \ \ \ \ st-\/>width\ =\ width;}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{return}\ st;}
\DoxyCodeLine{00091\ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \mbox{\hyperlink{structstaticnum}{staticnum}}*\ kolibri\_staticnum\_def(\mbox{\hyperlink{structstaticnum}{staticnum}}*\ st,\ uint32\_t\ xy,\ int16\_t\ width,\ int32\_t\ number)}
\DoxyCodeLine{00094\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{return}\ kolibri\_staticnum(st,\ xy,\ width,\ number,\ 0,\ 0,\ kolibri\_color\_table.color\_work\_text,\ 0);}
\DoxyCodeLine{00096\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \mbox{\hyperlink{structstaticnum}{staticnum}}*\ kolibri\_new\_staticnum(uint32\_t\ xy,\ int32\_t\ width,\ int32\_t\ number,\ encoding\_t\ enc,\ \textcolor{keywordtype}{int}\ size,\ color\_t\ font,\ color\_t\ bg)}
\DoxyCodeLine{00099\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{structstaticnum}{staticnum}}\ *st\ =\ (\mbox{\hyperlink{structstaticnum}{staticnum}}*)malloc(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structstaticnum}{staticnum}}));}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{return}\ kolibri\_staticnum(st,\ xy,\ width,\ number,\ enc,\ size,\ font,\ bg);}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \mbox{\hyperlink{structstaticnum}{staticnum}}*\ kolibri\_new\_staticnum\_def(uint32\_t\ xy,\ int32\_t\ width,\ int32\_t\ number)}
\DoxyCodeLine{00106\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ kolibri\_new\_staticnum(xy,\ width,\ number,\ cp866,\ 0,\ kolibri\_color\_table.color\_work\_text,\ 0);}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ gui\_add\_staticnum(\mbox{\hyperlink{structkolibri__window}{kolibri\_window}}\ *wnd,\ \mbox{\hyperlink{structstaticnum}{staticnum}}*\ sn)}
\DoxyCodeLine{00111\ \{}
\DoxyCodeLine{00112\ \ \ \ \ kolibri\_window\_add\_element(wnd,\ KOLIBRI\_STATICNUM,\ sn);}
\DoxyCodeLine{00113\ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \_\_attribute\_\_((\_\_stdcall\_\_))}
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ staticnum\_draw(\mbox{\hyperlink{structstaticnum}{staticnum}}\ *st)}
\DoxyCodeLine{00118\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{register}\ uint32\_t\ fmt;}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{if}\ (st-\/>width\ <\ 0)}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ fmt\ =\ (-\/st-\/>width\ <<\ 16);\ \textcolor{comment}{//\ leading\ zeros,\ decimal}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ fmt\ =\ (st-\/>width\ <<\ 16)\ |\ 0x80000000;\ \textcolor{comment}{//\ no\ leading\ zeros,\ decimal}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_(}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{stringliteral}{"{}int\ \$0x40"{}}}
\DoxyCodeLine{00127\ \ \ \ \ ::\textcolor{stringliteral}{"{}a"{}}(47),}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}b"{}}(fmt),}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}c"{}}(st-\/>number),}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}d"{}}(st-\/>start\_xy),}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}S"{}}(st-\/>color\_flags),}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}D"{}}(st-\/>bg\_color)}
\DoxyCodeLine{00133\ \ \ \ \ :);}
\DoxyCodeLine{00134\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ KOLIBRI\_STATICTEXT\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
