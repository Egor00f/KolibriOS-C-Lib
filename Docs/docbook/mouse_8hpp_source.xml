<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_mouse_8hpp_source" xml:lang="ru">
<title>mouse.hpp</title>
<indexterm><primary>C:/Users/yyari/Documents/KolibriOS/KolibriOS-Cpp-Lib/include/kolibriLib/input/mouse.hpp</primary></indexterm>
<programlisting linenumbering="unnumbered">1 <emphasis role="preprocessor">#ifndef&#32;__MOUSE_H__</emphasis>
2 <emphasis role="preprocessor">#define&#32;__MOUSE_H__</emphasis>
3 
4 <emphasis role="preprocessor">#include&#32;&lt;sys/ksys.h&gt;</emphasis>
5 <emphasis role="preprocessor">#include&#32;&lt;kolibriLib/types.hpp&gt;</emphasis>
6 <emphasis role="preprocessor">#include&#32;&lt;kolibriLib/system/filesystem.hpp&gt;</emphasis>
7 <emphasis role="preprocessor">#include&#32;&lt;kolibriLib/color.hpp&gt;</emphasis>
8 
9 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_kolibri_lib">KolibriLib</link>
10 {
12 &#32;&#32;&#32;&#32;<emphasis role="keyword">namespace&#32;</emphasis>mouse
13 &#32;&#32;&#32;&#32;{
14 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">enum</emphasis>&#32;MouseButtons
15 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
16 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;LeftButton&#32;&#32;=&#32;0b1,
17 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;RightButton&#32;=&#32;0b10,
18 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;CenterBtton&#32;=&#32;0b100,
19 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;FourButton&#32;&#32;=&#32;0b1000,
20 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;FiveButton&#32;&#32;=&#32;0b10000
21 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;};
22 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
25 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<link linkend="_struct_kolibri_lib_1_1point">Coord</link>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1aeb27a641652f74bc30fba05cfe20ab3a">GetMousePositionOnSreen</link>()
26 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
27 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ksys_pos_t&#32;a&#32;=&#32;_ksys_get_mouse_pos(KSYS_MOUSE_SCREEN_POS);
28 
29 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1aa4d36453273d28042aad9d1065b058ff">Coord</link>(a.x,&#32;a.y);
30 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
31 
34 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<link linkend="_struct_kolibri_lib_1_1point">Coord</link>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1ad979ee2e81616250903162815cc59c27">GetMousePositionInWindow</link>()
35 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
36 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ksys_pos_t&#32;a&#32;=&#32;_ksys_get_mouse_pos(KSYS_MOUSE_WINDOW_POS);
37 
38 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1aa4d36453273d28042aad9d1065b058ff">Coord</link>(a.x,&#32;a.y);
39 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
40 
43 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;uint32_t&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a7ae50aac73ac33bc25e269c12522a024">GetMouseButtons</link>()
44 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
45 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;_ksys_get_mouse_buttons();
46 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
47 
50 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;uint32_t&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a56edecd4a7aa3f7af9eadf9ea32e93c0">GetMouseWheels</link>()
51 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
52 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;_ksys_get_mouse_wheels();
53 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
54 
57 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a39c94a2a4489ad8d4ec05a07ac13e259">EmulateMouse</link>(uint8_t&#32;m)
58 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
59 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;asm_inline(
60 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;int&#32;$0x40&quot;</emphasis>&#32;::<emphasis role="stringliteral">&quot;a&quot;</emphasis>(18),&#32;<emphasis role="stringliteral">&quot;b&quot;</emphasis>(19),&#32;<emphasis role="stringliteral">&quot;c&quot;</emphasis>(5),&#32;<emphasis role="stringliteral">&quot;d&quot;</emphasis>(m)
61 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;);
62 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
63 
66 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1ad5181e5115b88147badd22a0c19cbe4f">CenterCursor</link>()
67 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
68 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;asm_inline(
69 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;int&#32;$0x40&quot;</emphasis>&#32;::<emphasis role="stringliteral">&quot;a&quot;</emphasis>(18),&#32;<emphasis role="stringliteral">&quot;b&quot;</emphasis>(15)
70 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;);
71 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
72 
74 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">typedef</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>*&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a62aae3bff5a15d2c1aacef753a8a5d05">CursorHandle</link>;
75 
76 
81 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a62aae3bff5a15d2c1aacef753a8a5d05">CursorHandle</link>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1afa9e02a685efd7b6ab8f92b728ee1a2d">LoadCursor</link>(<emphasis role="keyword">const</emphasis>&#32;<link linkend="_class_kolibri_lib_1_1filesystem_1_1_path">filesystem::Path</link>&amp;&#32;path)
82 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
83 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;_ksys_load_cursor((<emphasis role="keywordtype">void</emphasis>&#32;*)path.<link linkend="_class_kolibri_lib_1_1filesystem_1_1_path_1a1ce6078475d3a9b5c340e08b1bc65217">GetChars</link>(),&#32;KSYS_CURSOR_FROM_FILE);
84 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
85 
90 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a62aae3bff5a15d2c1aacef753a8a5d05">CursorHandle</link>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1afa9e02a685efd7b6ab8f92b728ee1a2d">LoadCursor</link>(<emphasis role="keywordtype">void</emphasis>&#32;*ptr)
91 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
92 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;_ksys_load_cursor(ptr,&#32;KSYS_CURSOR_FROM_MEM);
93 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
94 
95 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;///&#32;@brief&#32;Загрузить&#32;курсор&#32;мыши</emphasis>
96 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;///&#32;@param&#32;cur&#32;путь&#32;до&#32;файла&#32;с&#32;курсором</emphasis>
97 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;///&#32;@return&#32;Хендл&#32;загруженного&#32;курсора</emphasis>
98 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;///&#32;@paragraph&#32;Файл&#32;курсора&#32;должен&#32;быть&#32;в&#32;формате&#32;.cur,&#32;стандартном&#32;для&#32;MS&#32;Windows,&#32;причём&#32;размером&#32;32*32&#32;пиксел</emphasis>
99 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;inline&#32;CursorHandle&#32;LoadCursor(Colors::ARGB[]&#32;cur);</emphasis>
100 
104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a62aae3bff5a15d2c1aacef753a8a5d05">CursorHandle</link>&#32;<link linkend="_namespace_kolibri_lib_1_1mouse_1a21b758a85831bd3a66ac4cd10ac632a3">SetCursor</link>(<link linkend="_namespace_kolibri_lib_1_1mouse_1a62aae3bff5a15d2c1aacef753a8a5d05">CursorHandle</link>&#32;handle)
105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;_ksys_set_cursor(handle);
107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
108 
109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">inline</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;DeleteCursor(<link linkend="_namespace_kolibri_lib_1_1mouse_1a62aae3bff5a15d2c1aacef753a8a5d05">CursorHandle</link>&#32;handle)
110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;_ksys_delete_cursor(handle);
112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
113 &#32;&#32;&#32;&#32;}
114 }&#32;<emphasis role="comment">//&#32;namespace&#32;KolibriLib</emphasis>
115 
116 
117 <emphasis role="preprocessor">#endif&#32;</emphasis><emphasis role="comment">//&#32;__MOUSE_H__</emphasis>
</programlisting></section>
